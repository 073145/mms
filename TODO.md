# High Priority

- Rename BufferInterface, since it's not actually an interface...
- ViewUpdater class???
- Rename draw to something more conspicuous
- Ensure that the static classes don't contain state
- Easy mechanism for making sure methods are only executed once'.
- Separate things into graphics and model
- Get rid of the fact that the mouse needs to be passed a pointer to the maze
    - This can be done once the sensors are fast enough to run in the sensor
      loop, then we can just pass the Maze* into the mouse from within the
      World class
- Break up "Options.h", or rename to "Controller Options.h"

- Move GraphicUtilties to Graphics
- get rid of P() uses in GraphicUtilities

- Bidirectional map - make this more resilient
- Fix MackAlgo wall declaration
    - Fix other wall algos...

- Arbitrary tile text
    - Alignment in tile (left alignged, right aligned)
    - Make a note about text wrapping
    - Make a note about unknown characters
    - What to do if a letter is unknown (newline, other whitespace, unicode)?
    - Make sure that the rows and cols specified by the algo are used by the simulator
    - Alignment in the png image (worry about this last)
- Make a voluntary Delay in setTileBaseColor, text
- Stepper motor
- Sensor type (digital or analog)
- Make some utility that keeps track of simulation and real elapsed time
    - Actually keep track of the elapsed simulation time
    - Max speeds for manual algorithm
    - Add the simulation time to the logging
        - Perhaps even refactor the elapsed time in logging
- Move some graphics stuff in Driver into GraphicUtilities
- Change float to units (including in the ParamParser and Param class)
- Type safety (in terms of units) of the parameters
- Tile Text
    - Fix the fact that the bitmap is initialized in driver but the string of characters is in GraphicUtilities
    - Assert that a character exsits before we try to draw it to the tile
    - Check that a font and image exist, print error and die if not
    - Make a helper method in graphic utilities specifically for toggling tile text
    - Build a cache with positions already pre-calculated
    - Use a map instead of a string for quicker search
    - Update text is too slow... it's optimizing time
    - Make maxRowsAndCols a runtime parameter (make it 2 x 3 for now)
    - Should we have text alignment be a parameter?
    - Be able to just show actual distances
- Put a toolbar at the top or bottom with info
    - Information of the wheel speeds
    - Display a clock (real and sim time)
    - Current layout
    - Pretty much all state information
        - zoom level (16:1, etc.)
        - sim speed
        - Show toggle tile text, even when not visible
    - Check to make sure font won't be cut off, use ellipses if so (How do we deal with text being cut off in the vertical direction?)
    - Set the mouse algo in State for display in the toolbar
    - Make terminal style output at bottom or right of window (GUI)
- Make MouseInterface into an interface, and then implement the simulator interface, make a real-world interface
- Look at Tomasz' maze website
- Figure out how to get rid of ifdefs in algorithm
- Make a SimInterface and make sure it's easy to "extract" an algorithm for use on Arduino
- Updates on the tile boundaries, not centers
- Figure out a nice way to use a vector for tiles for the simulation, but an array for real life
- Other mouse movements - curve turns, j-turns, diagonals, etc.
    - Genericize the move forward so that we can do curve turns
- Sensor readings for walls other than front, left right
- Include Arduino "types" with the MouseInterface
- More Arduino function support
- Add gridlines (see https://www.youtube.com/watch?v=LGRutv9cGBA and https://www.youtube.com/watch?v=gtnTBf5ItEc)
    - Variable width?
- Buffer communication (like with the real robot)
- Clang compiler support
- Number of unique cells traversed
- Make a separate process for algo, so if the algo dies the sim stays alive, and so that we can start an algo over really easily
- Continuous performance
    - CPU with megaMouse.xml
    - Reading the sensors is super non-performant...
    - MinSleepDuration is a little bit weird - sometimes we try to sleep less than that
- Explain which options only work for discrete mode
    - Make a note about how to do params in algos
    - Talk about each of the parameters in documentation
- Discrete mode speed...
    - Ensure that the wheel speed is not too high in the MouseInterface (so that the mouse does not clip through walls)
- Make a note about symmetry with discrete interface
    - Make a formal check for symmetry

# Medum Priority

- For curve turns, see if you can figure out the arc that the mouse should go on to simulate a curve turn, use checkpoints
    - No curve turn has two line segments, each is tangent
        - first order curve turn has 3 line segments total, equally spaced, etc.
        - second order curve turn has 4 line segments total, equally spaced, etc.
- Break up MouseInterface into DiscreteMouseInterface and ContinuousMouseInterface
- isDiscreteInterfaceCompatible and isContinuousInterfaceCompatible
- Enable steering the wheels and sensors during run
- Set acceleration of all moving/rotating things
- Rename Tile to Cell
- Support reading or writing multiple file types
    - .maz (plain text), .MAZ (binary), .map (ascii map)
    - https://code.google.com/p/maze-solver/wiki/MazeFileFormats
- Make some default Arduino implementations for some functions
- Make a system for nearly instantly checking stats on many mazes:
    - like unit tests
    - solved or not
    - how many steps
    - ave steps
    - etc.
- Still view a maze if it fails validation, but don't let the sim continue...
- Check megaMouse performance
    - Better implementation of sensor view collision detection
    - Figure out how to make sensors more efficie
    - Make the sensor polygon model better
- Add manual mode high scores
- Continuous mode improvements (overall)
- Xorg and compiz performance...
- Kill SimUtilities...
- Fix CPMinMax.h - order of includes matter, unforunately...
- Shortest path graphic (phantom bot that travels along other shortest paths)
- Randomly select a pre-defined maze
- Write a good continuous algorithm
- Data recording for pause, rewind, fast forward
- Interrupt interface
- Run the program with maximum thread priority
- New maze w/o restarting app
    - Be able to restart in the middle of a run (this is tricky with the algo thread...)
- Fix the makefile so that if header files disappear we don't need to make clean
- Normalize random number generation (Implement Windows random number generation) // TODO: Should be fixed...
- Make a nice mechanism for writing our own maze generation algorithms
- In discrete mode, the mouse can overturn or go too far if the sim speed is to high. We need to implement some logic that checks this ahead of time and then just teleports... sort of like bullets in other physics simulators
- Add trajectory lines (see https://www.youtube.com/watch?v=kgJClVCPu3w)
- Crash recovery semantics
- Draw a path of where the robot has been (the history object could be used for recording as well)
- Perhaps use a separate process entirely for the mouse (so we can restart it easily)
- Write scripts we can execute (like unit tests) to make sure that our docs are in sync with the code
- Some way to turn the loggers on/off
- A way to log/print only info or higher, warn or higher, etc.
- Replace the convexHull with union in the mouse collision polygon initialization
- XML schema/validators
- Support multiple mice

# Low Priority

- Get rid of as much platform dependant code as possible
- Clean up the coding standards
- Optimize for space in the TEXTURE_CPU_BUFFER and GRAPHIC_CPU_BUFFER - Don't repeat vertices
- VSync so the graphics don't tear
- Better run number system
- Update the check_params.py script to make sure that the return type of the
  Param methods is the same as the type of the member variable
- Detect STL use in maze and mouse algos, send a warning
- Add a simple polygonFragmentShader
- Inconsistent wall declaration colors (declared wall on one side of wall, declared no wall on other side of wall)
- Inconsistent wall declaration colors (declared one side of wall but not the other)
- Perhaps impose memory limits on the algorithm
- Add a way to change the mouse color
- Bluetooth connection to the actual mouse
- Change FreeGLUT to GLFW
- 3D
- Crash animation for both modes
- Unit tests
- Try to break the simulator from within the algos, make it tamper-resistant
- Reduce include dependencies as much as possible
- Implement perfect hashing for key input and algo selection
- Support more than just white fonts
- Protect functions that shouldn't be accessed by the algo by checking thread ID
- Change over the Makefile to use cmake
- Rewrite/clean floodfill
- Color palettes

# Clean-Up

- Rename TriangleTexture and VertexTexture
- Write some unittests
- Change map.count(item) != 0 to map.find(item) != map.end()
- Add IMouseAlgorithm (and maze) to the build path so we can just do #include <IMouseAlgorithm.h> (maybe...)
- Run the parameter consistency script, make sure values align
- Convert primitive types to GL types
- Return const references instead of values (pointers???)
- Reduce includes as much as possible
- Rewrite the Makefile to use an "inc" directory
- Change "bool foo(false)" to "bool foo = false" for primitive - they look like function calls
- Handle bad values in the parameters, such as bad colors, negative values, etc.
- Put interface in root of src directory
- write "isDirectory(std::string path)" and enforce this where necessary
- write getRandom() and replace old calls to rand()
- Performance on different systems???
- The mouse sometimes rotates weirdly (goes slowly, backwards for a second, and then forwards fast. You can see what I mean by just increasing the view length of the sensors for a continuous algo)
- Remove as many c_str() as possible
- Replace "cout" with "L()"
- Pass things by reference when possible
- Sprinkle assertions everywhere
- Validate the coding standards (especially "{" placement)
- Rewrite "i++" and "++i" as "i += 1"
- Give better explanations for the GeometryUtilities
- Buffer the declared walls and include a quick "resetWalls()" method
- Change the Mouse to use the technically correct position update implementation
- Clean up / improve the coding standards
- Fit code into 80/100 columns... use a linter for this
- Put consts in GraphicUtilties (and other classes)
- Replace braket notation with methods (walls[NORTH] = true -> walls.insert(std::make_pair(NORTH, true)));
- Document the confusing coordinate systems
- for each loop iterations should use const references
- The interfaces don't need to be passed as pointers, right? Try passing as values...
- Upgrade convert_mazes.py to Python 3
- Move as much OpenGL code to a single file (Main.cpp) as possible
- P() be const? S()?
- init vs initialize
- Write a script to ensure that ASSERTS don't hold any state
- Ensure boolean operators aren't used in asserts... should be using a different assert
- Replace NULL with nullptr
- Rename Tile to Cell?
- Fix up so that -Wall -Werror -pedantic-error flags pass
- -Wall: Show all warning messages
- -Werror: Fail compilation on warnings
- -pedantic-errors: Flag even the most pedantic of errors
- Take out -g makefile option
- Reduce the number of LIBS in makefile
- Does the makefile work for multiple platofrms???
- Segfault on pressing x
